<p>In part one I got the basics of the game control working to a point where I felt I had an excellent foundation in which to build upon. In part two I wanted to start to build in some intelligence for the computer player rather than the computer aimlessly picking random squares and I wanted to tidy up my code - indentation etc. </p>

<p>I’m going to break it all down but here is my final code:</p>

<div class="highlight"><pre><code class="ruby"><span class="lineno">  1</span> <span class="c1"># Initialize board hash</span>
<span class="lineno">  2</span> <span class="c1"># Draw board</span>
<span class="lineno">  3</span> <span class="c1"># Choose at random who goes first</span>
<span class="lineno">  4</span> <span class="c1"># Player/Computer has a turn if square available</span>
<span class="lineno">  5</span> <span class="c1"># check for winner</span>
<span class="lineno">  6</span> 
<span class="lineno">  7</span> <span class="nb">require</span> <span class="s1">&#39;pry&#39;</span>
<span class="lineno">  8</span> 
<span class="lineno">  9</span> <span class="c1"># constants</span>
<span class="lineno"> 10</span> <span class="c1"># rows columns and diagonals</span>
<span class="lineno"> 11</span> <span class="no">WINNING_LINES</span> <span class="o">=</span> <span class="o">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="o">]</span><span class="p">,</span><span class="o">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="o">]</span><span class="p">,</span><span class="o">[</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="o">]</span><span class="p">,</span><span class="o">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">7</span><span class="o">]</span><span class="p">,</span><span class="o">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">8</span><span class="o">]</span><span class="p">,</span><span class="o">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">9</span><span class="o">]</span><span class="p">,</span><span class="o">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">9</span><span class="o">]</span><span class="p">,</span><span class="o">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="o">]]</span>
<span class="lineno"> 12</span> 
<span class="lineno"> 13</span> <span class="c1"># markers</span>
<span class="lineno"> 14</span> <span class="n">X</span> <span class="o">=</span> <span class="s1">&#39;x&#39;</span>
<span class="lineno"> 15</span> <span class="n">O</span> <span class="o">=</span> <span class="s1">&#39;o&#39;</span>
<span class="lineno"> 16</span> 
<span class="lineno"> 17</span> <span class="c1"># Available squares</span>
<span class="lineno"> 18</span> <span class="k">def</span> <span class="nf">available_squares</span><span class="p">(</span><span class="n">squares</span><span class="p">)</span>
<span class="lineno"> 19</span>   <span class="n">squares</span><span class="o">.</span><span class="n">select</span> <span class="p">{</span><span class="o">|</span><span class="n">_</span><span class="p">,</span><span class="n">v</span><span class="o">|</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot; &quot;</span><span class="p">}</span><span class="o">.</span><span class="n">keys</span>
<span class="lineno"> 20</span> <span class="k">end</span>
<span class="lineno"> 21</span> 
<span class="lineno"> 22</span> <span class="c1"># draw the board</span>
<span class="lineno"> 23</span> <span class="k">def</span> <span class="nf">draw_board</span><span class="p">(</span><span class="n">squares</span><span class="p">)</span>
<span class="lineno"> 24</span>   <span class="nb">system</span> <span class="s1">&#39;clear&#39;</span>
<span class="lineno"> 25</span>   <span class="nb">puts</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">squares</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="si">}</span><span class="s2">|</span><span class="si">#{</span><span class="n">squares</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span><span class="si">}</span><span class="s2">|</span><span class="si">#{</span><span class="n">squares</span><span class="o">[</span><span class="mi">3</span><span class="o">]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="lineno"> 26</span>   <span class="nb">puts</span> <span class="s2">&quot;-----&quot;</span>
<span class="lineno"> 27</span>   <span class="nb">puts</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">squares</span><span class="o">[</span><span class="mi">4</span><span class="o">]</span><span class="si">}</span><span class="s2">|</span><span class="si">#{</span><span class="n">squares</span><span class="o">[</span><span class="mi">5</span><span class="o">]</span><span class="si">}</span><span class="s2">|</span><span class="si">#{</span><span class="n">squares</span><span class="o">[</span><span class="mi">6</span><span class="o">]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="lineno"> 28</span>   <span class="nb">puts</span> <span class="s2">&quot;-----&quot;</span>
<span class="lineno"> 29</span>   <span class="nb">puts</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">squares</span><span class="o">[</span><span class="mi">7</span><span class="o">]</span><span class="si">}</span><span class="s2">|</span><span class="si">#{</span><span class="n">squares</span><span class="o">[</span><span class="mi">8</span><span class="o">]</span><span class="si">}</span><span class="s2">|</span><span class="si">#{</span><span class="n">squares</span><span class="o">[</span><span class="mi">9</span><span class="o">]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="lineno"> 30</span> <span class="k">end</span>
<span class="lineno"> 31</span> 
<span class="lineno"> 32</span> <span class="c1"># check for winner method</span>
<span class="lineno"> 33</span> <span class="k">def</span> <span class="nf">check_for_winner</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">squares</span><span class="p">)</span>
<span class="lineno"> 34</span>   <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">find</span> <span class="p">{</span><span class="o">|</span><span class="n">l</span><span class="o">|</span> <span class="n">l</span><span class="o">.</span><span class="n">all?</span> <span class="p">{</span><span class="o">|</span><span class="n">k</span><span class="o">|</span> <span class="n">squares</span><span class="o">[</span><span class="n">k</span><span class="o">]</span> <span class="o">==</span> <span class="n">X</span><span class="p">}</span> <span class="p">}</span>
<span class="lineno"> 35</span>     <span class="nb">puts</span> <span class="s2">&quot;player WINS!!!&quot;</span>
<span class="lineno"> 36</span>     <span class="kp">true</span>
<span class="lineno"> 37</span>   <span class="k">elsif</span> <span class="n">line</span><span class="o">.</span><span class="n">find</span> <span class="p">{</span><span class="o">|</span><span class="n">l</span><span class="o">|</span> <span class="n">l</span><span class="o">.</span><span class="n">all?</span> <span class="p">{</span><span class="o">|</span><span class="n">k</span><span class="o">|</span> <span class="n">squares</span><span class="o">[</span><span class="n">k</span><span class="o">]</span> <span class="o">==</span> <span class="n">O</span><span class="p">}</span> <span class="p">}</span>
<span class="lineno"> 38</span>     <span class="nb">puts</span> <span class="s2">&quot;computer wins :(&quot;</span>
<span class="lineno"> 39</span>     <span class="kp">true</span>
<span class="lineno"> 40</span>   <span class="k">end</span>
<span class="lineno"> 41</span> <span class="k">end</span>
<span class="lineno"> 42</span> 
<span class="lineno"> 43</span> <span class="c1"># checks to see if two in a row</span>
<span class="lineno"> 44</span> <span class="k">def</span> <span class="nf">two_in_a_row</span><span class="p">(</span><span class="n">hsh</span><span class="p">,</span> <span class="n">mrkr</span><span class="p">)</span>
<span class="lineno"> 45</span>   <span class="k">if</span> <span class="n">hsh</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">mrkr</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
<span class="lineno"> 46</span>     <span class="n">hsh</span><span class="o">.</span><span class="n">select</span><span class="p">{</span><span class="o">|</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="o">|</span> <span class="n">v</span> <span class="o">==</span> <span class="s1">&#39; &#39;</span><span class="p">}</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">first</span>
<span class="lineno"> 47</span>   <span class="k">else</span>
<span class="lineno"> 48</span>     <span class="kp">false</span>
<span class="lineno"> 49</span>   <span class="k">end</span>
<span class="lineno"> 50</span> <span class="k">end</span>
<span class="lineno"> 51</span> 
<span class="lineno"> 52</span> <span class="c1"># player/computer picks square methods</span>
<span class="lineno"> 53</span> <span class="c1"># player 1</span>
<span class="lineno"> 54</span> <span class="k">def</span> <span class="nf">player1</span><span class="p">(</span><span class="n">squares</span><span class="p">)</span>
<span class="lineno"> 55</span>   <span class="k">if</span> <span class="n">available_squares</span><span class="p">(</span><span class="n">squares</span><span class="p">)</span><span class="o">.</span><span class="n">any?</span>
<span class="lineno"> 56</span>     <span class="nb">puts</span> <span class="s2">&quot;Choose an available square from </span><span class="si">#{</span><span class="n">available_squares</span><span class="p">(</span><span class="n">squares</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="lineno"> 57</span>     <span class="n">i</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span><span class="o">.</span><span class="n">to_i</span>
<span class="lineno"> 58</span>     <span class="k">if</span> <span class="n">available_squares</span><span class="p">(</span><span class="n">squares</span><span class="p">)</span><span class="o">.</span><span class="n">include?</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="lineno"> 59</span>       <span class="n">squares</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">X</span>
<span class="lineno"> 60</span>     <span class="k">else</span>
<span class="lineno"> 61</span>       <span class="n">player1</span><span class="p">(</span><span class="n">squares</span><span class="p">)</span>
<span class="lineno"> 62</span>     <span class="k">end</span>
<span class="lineno"> 63</span>     <span class="n">draw_board</span><span class="p">(</span><span class="n">squares</span><span class="p">)</span>
<span class="lineno"> 64</span>   <span class="k">end</span>
<span class="lineno"> 65</span> <span class="k">end</span>
<span class="lineno"> 66</span> 
<span class="lineno"> 67</span> <span class="c1"># player 2</span>
<span class="lineno"> 68</span> <span class="k">def</span> <span class="nf">player2</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">squares</span><span class="p">)</span>
<span class="lineno"> 69</span>   <span class="nb">puts</span> <span class="s2">&quot;Computer chooses a square&quot;</span>
<span class="lineno"> 70</span>   <span class="nb">sleep</span> <span class="mi">0</span><span class="o">.</span><span class="mi">5</span>
<span class="lineno"> 71</span> 
<span class="lineno"> 72</span>   <span class="n">defend_this_square</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="lineno"> 73</span>   <span class="n">attacked</span> <span class="o">=</span> <span class="kp">false</span>
<span class="lineno"> 74</span>   
<span class="lineno"> 75</span>   <span class="c1"># attack </span>
<span class="lineno"> 76</span>   <span class="no">WINNING_LINES</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">l</span><span class="o">|</span>
<span class="lineno"> 77</span>     <span class="n">defend_this_square</span> <span class="o">=</span> <span class="n">two_in_a_row</span><span class="p">({</span><span class="n">l</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">=&gt;</span> <span class="n">squares</span><span class="o">[</span><span class="n">l</span><span class="o">[</span><span class="mi">0</span><span class="o">]]</span><span class="p">,</span> <span class="n">l</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">=&gt;</span> <span class="n">squares</span><span class="o">[</span><span class="n">l</span><span class="o">[</span><span class="mi">1</span><span class="o">]]</span><span class="p">,</span> <span class="n">l</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span> <span class="o">=&gt;</span> <span class="n">squares</span><span class="o">[</span><span class="n">l</span><span class="o">[</span><span class="mi">2</span><span class="o">]]</span><span class="p">},</span> <span class="n">O</span><span class="p">)</span>
<span class="lineno"> 78</span>     <span class="k">if</span> <span class="n">defend_this_square</span>
<span class="lineno"> 79</span>       <span class="n">squares</span><span class="o">[</span><span class="n">defend_this_square</span><span class="o">]</span> <span class="o">=</span> <span class="n">O</span>
<span class="lineno"> 80</span>       <span class="n">attacked</span> <span class="o">=</span> <span class="kp">true</span>
<span class="lineno"> 81</span>       <span class="k">break</span>
<span class="lineno"> 82</span>     <span class="k">end</span>
<span class="lineno"> 83</span>   <span class="k">end</span>
<span class="lineno"> 84</span>   
<span class="lineno"> 85</span>   <span class="c1"># defend  </span>
<span class="lineno"> 86</span>   <span class="k">if</span> <span class="n">attacked</span> <span class="o">==</span> <span class="kp">false</span>
<span class="lineno"> 87</span>     <span class="no">WINNING_LINES</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">l</span><span class="o">|</span>
<span class="lineno"> 88</span>       <span class="n">defend_this_square</span> <span class="o">=</span> <span class="n">two_in_a_row</span><span class="p">({</span><span class="n">l</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">=&gt;</span> <span class="n">squares</span><span class="o">[</span><span class="n">l</span><span class="o">[</span><span class="mi">0</span><span class="o">]]</span><span class="p">,</span> <span class="n">l</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">=&gt;</span> <span class="n">squares</span><span class="o">[</span><span class="n">l</span><span class="o">[</span><span class="mi">1</span><span class="o">]]</span><span class="p">,</span> <span class="n">l</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span> <span class="o">=&gt;</span> <span class="n">squares</span><span class="o">[</span><span class="n">l</span><span class="o">[</span><span class="mi">2</span><span class="o">]]</span><span class="p">},</span> <span class="n">X</span><span class="p">)</span>
<span class="lineno"> 89</span>       <span class="k">if</span> <span class="n">defend_this_square</span>
<span class="lineno"> 90</span>         <span class="n">squares</span><span class="o">[</span><span class="n">defend_this_square</span><span class="o">]</span> <span class="o">=</span> <span class="n">O</span>
<span class="lineno"> 91</span>         <span class="k">break</span>
<span class="lineno"> 92</span>       <span class="k">end</span> 
<span class="lineno"> 93</span>     <span class="k">end</span> 
<span class="lineno"> 94</span>   <span class="k">end</span>
<span class="lineno"> 95</span>   <span class="n">squares</span><span class="o">[</span><span class="n">available_squares</span><span class="p">(</span><span class="n">squares</span><span class="p">)</span><span class="o">.</span><span class="n">sample</span><span class="o">]</span> <span class="o">=</span> <span class="n">O</span> <span class="k">unless</span> <span class="n">defend_this_square</span>
<span class="lineno"> 96</span>   <span class="n">draw_board</span><span class="p">(</span><span class="n">squares</span><span class="p">)</span>
<span class="lineno"> 97</span> <span class="k">end</span>
<span class="lineno"> 98</span> 
<span class="lineno"> 99</span> <span class="c1"># play again?</span>
<span class="lineno">100</span> <span class="n">play_again</span> <span class="o">=</span> <span class="s1">&#39;y&#39;</span>
<span class="lineno">101</span> 
<span class="lineno">102</span> <span class="k">while</span> <span class="n">play_again</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span>
<span class="lineno">103</span> 
<span class="lineno">104</span>   <span class="c1"># initialize the empty hash that will store the board squares</span>
<span class="lineno">105</span>   <span class="n">board_squares</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span> <span class="o">=&gt;</span> <span class="s2">&quot; &quot;</span><span class="p">,</span><span class="mi">2</span> <span class="o">=&gt;</span> <span class="s2">&quot; &quot;</span><span class="p">,</span><span class="mi">3</span> <span class="o">=&gt;</span> <span class="s2">&quot; &quot;</span><span class="p">,</span><span class="mi">4</span> <span class="o">=&gt;</span> <span class="s2">&quot; &quot;</span><span class="p">,</span><span class="mi">5</span> <span class="o">=&gt;</span> <span class="s2">&quot; &quot;</span><span class="p">,</span><span class="mi">6</span> <span class="o">=&gt;</span> <span class="s2">&quot; &quot;</span><span class="p">,</span><span class="mi">7</span> <span class="o">=&gt;</span> <span class="s2">&quot; &quot;</span><span class="p">,</span><span class="mi">8</span> <span class="o">=&gt;</span> <span class="s2">&quot; &quot;</span><span class="p">,</span><span class="mi">9</span> <span class="o">=&gt;</span> <span class="s2">&quot; &quot;</span><span class="p">}</span>
<span class="lineno">106</span> 
<span class="lineno">107</span>   <span class="c1"># players stored in array so player can be chosen at random</span>
<span class="lineno">108</span>   <span class="n">players</span> <span class="o">=</span> <span class="o">[</span><span class="s2">&quot;player1&quot;</span><span class="p">,</span> <span class="s2">&quot;player2&quot;</span><span class="o">]</span>
<span class="lineno">109</span> 
<span class="lineno">110</span>   <span class="c1"># setting the who goes first variable</span>
<span class="lineno">111</span>   <span class="n">goes_first</span> <span class="o">=</span> <span class="n">players</span><span class="o">.</span><span class="n">sample</span>
<span class="lineno">112</span> 
<span class="lineno">113</span>   <span class="c1"># show players the empty board</span>
<span class="lineno">114</span>   <span class="n">draw_board</span><span class="p">(</span><span class="n">board_squares</span><span class="p">)</span>
<span class="lineno">115</span> 
<span class="lineno">116</span>   <span class="c1"># Conditional that checks which loop to execute: player 1 or player 2</span>
<span class="lineno">117</span>   <span class="k">if</span> <span class="n">goes_first</span> <span class="o">==</span> <span class="s1">&#39;player1&#39;</span>
<span class="lineno">118</span>     <span class="k">begin</span>
<span class="lineno">119</span>       <span class="k">break</span> <span class="k">if</span> <span class="n">check_for_winner</span><span class="p">(</span><span class="no">WINNING_LINES</span><span class="p">,</span> <span class="n">board_squares</span><span class="p">)</span> <span class="o">==</span> <span class="kp">true</span>
<span class="lineno">120</span>       <span class="n">player1</span><span class="p">(</span><span class="n">board_squares</span><span class="p">)</span>
<span class="lineno">121</span>       <span class="k">break</span> <span class="k">if</span> <span class="n">check_for_winner</span><span class="p">(</span><span class="no">WINNING_LINES</span><span class="p">,</span> <span class="n">board_squares</span><span class="p">)</span> <span class="o">==</span> <span class="kp">true</span>
<span class="lineno">122</span>       <span class="n">player2</span><span class="p">(</span><span class="no">WINNING_LINES</span><span class="p">,</span> <span class="n">board_squares</span><span class="p">)</span>
<span class="lineno">123</span>     <span class="k">end</span> <span class="k">until</span> <span class="n">available_squares</span><span class="p">(</span><span class="n">board_squares</span><span class="p">)</span><span class="o">.</span><span class="n">empty?</span>
<span class="lineno">124</span>   <span class="k">elsif</span> <span class="n">goes_first</span> <span class="o">==</span> <span class="s1">&#39;player2&#39;</span>
<span class="lineno">125</span>     <span class="k">begin</span>
<span class="lineno">126</span>       <span class="k">break</span> <span class="k">if</span> <span class="n">check_for_winner</span><span class="p">(</span><span class="no">WINNING_LINES</span><span class="p">,</span> <span class="n">board_squares</span><span class="p">)</span> <span class="o">==</span> <span class="kp">true</span>
<span class="lineno">127</span>       <span class="n">player2</span><span class="p">(</span><span class="no">WINNING_LINES</span><span class="p">,</span> <span class="n">board_squares</span><span class="p">)</span>
<span class="lineno">128</span>       <span class="k">break</span> <span class="k">if</span> <span class="n">check_for_winner</span><span class="p">(</span><span class="no">WINNING_LINES</span><span class="p">,</span> <span class="n">board_squares</span><span class="p">)</span> <span class="o">==</span> <span class="kp">true</span>
<span class="lineno">129</span>       <span class="n">player1</span><span class="p">(</span><span class="n">board_squares</span><span class="p">)</span>
<span class="lineno">130</span>     <span class="k">end</span> <span class="k">until</span> <span class="n">available_squares</span><span class="p">(</span><span class="n">board_squares</span><span class="p">)</span><span class="o">.</span><span class="n">empty?</span>
<span class="lineno">131</span>   <span class="k">end</span>
<span class="lineno">132</span> 
<span class="lineno">133</span>   <span class="nb">sleep</span> <span class="mi">0</span><span class="o">.</span><span class="mi">5</span>
<span class="lineno">134</span>   <span class="nb">puts</span> <span class="s2">&quot;GAME OVER&quot;</span>
<span class="lineno">135</span> 
<span class="lineno">136</span>   <span class="c1"># play again?</span>
<span class="lineno">137</span>   <span class="nb">sleep</span> <span class="mi">0</span><span class="o">.</span><span class="mi">5</span>
<span class="lineno">138</span>   <span class="nb">puts</span> <span class="s2">&quot;Play again? (y/n)&quot;</span>
<span class="lineno">139</span>   <span class="n">play_again</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span>
<span class="lineno">140</span> 
<span class="lineno">141</span> <span class="k">end</span></code></pre></div>

<p>So this program is effectively in two parts. The first part holds all of the methods and constants required in the game and the second part is the game itself which resides inside a while loop. The while loop basically checks to see if the play_again variable is set to yes or no. </p>

<p>First off with have a constant variable called WINNING_LINES. This is an array of arrays that is storing the lines on our tic tac toe board. There are 8 lines in total and I will iterate through these arrays when I am checking for certain conditions in my game methods. </p>

<p>A constant variable is denoted by a leading capital although the convention is to write them all in CAPS. The scope of a constant differs to local variables. You should use a constant variable when its value shouldn’t be changed although beware it is possible to change a constant variable in ruby with a little warning from the interpreter.</p>

<p>I have then stored ‘x’ &amp; ‘o’ in the constants X and O for use later on in our game methods.</p>

<p>I covered the methods draw_board, available_squares and player1 in part 1 and they remain unchanged. I also wrote a player2 method but in this part I began to build this method out to give it some added power. In addition to these methods I’ve added two new methods, two_in_a_row and check_for_winner which I’ll explain shortly. First lets look at the player2 method before the change.</p>

<p>Before:</p>

<div class="highlight"><pre><code class="ruby"><span class="lineno">1</span> <span class="k">def</span> <span class="nf">player2</span><span class="p">(</span><span class="n">squares</span><span class="p">)</span>
<span class="lineno">2</span>   <span class="nb">puts</span> <span class="s2">&quot;Computer chooses a square&quot;</span>
<span class="lineno">3</span>   <span class="nb">sleep</span> <span class="mi">0</span><span class="o">.</span><span class="mi">5</span>
<span class="lineno">4</span>   <span class="n">i</span> <span class="o">=</span> <span class="n">available_squares</span><span class="p">(</span><span class="n">squares</span><span class="p">)</span><span class="o">.</span><span class="n">sample</span>
<span class="lineno">5</span>   <span class="n">squares</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">O</span>
<span class="lineno">6</span>   <span class="n">draw_board</span><span class="p">(</span><span class="n">squares</span><span class="p">)</span>
<span class="lineno">7</span> <span class="k">end</span></code></pre></div>

<p>You can see that at this point the method just outputs a message and then assigns a random square to a local variable named i from the available_squares method. Using the i variable it then assigns an ‘o’ to the square on the board and then draws the board. </p>

<p>At this point the computer is hideously disadvantaged as all it can do is select a random available square. It cannot attack and it cannot defend so that is what I needed to build in. </p>

<p>We’ll look at <i>how</i> the two new methods work shortly but for now just know the following: </p>

<ul>
  <li>The two_in_a_row method checks to see if there is a combination that exists whereby a player has two of their markers in a line and the remaining square is emtpy. For example true if ‘x’ ‘ ‘ ‘x’ false if ‘x’ ‘o’ ‘x’.</li>
  <li>The check_for_winner method checks to see if either a line is filled exclusively with either all ‘x’ or ‘o’ for example true if ‘x’ ‘x’ ‘x’ or ‘o’ ‘o’ ‘o’.</li>
</ul>

<p>I added a parameter to the method to start with so that we can now pass in the WINNING_LINES as well as the board_squares. </p>

<div class="highlight"><pre><code class="ruby"><span class="k">def</span> <span class="nf">player2</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">squares</span><span class="p">)</span></code></pre></div>

<p>I added two new local variables to work with within the method named defend_this_square and attacked and assigned them nil and false respectively.</p>

<div class="highlight"><pre><code class="ruby"><span class="n">defend_this_square</span> <span class="o">=</span> <span class="kp">nil</span>
<span class="n">attacked</span> <span class="o">=</span> <span class="kp">false</span></code></pre></div>

<p>Now we want one of three things will happen on the computers turn: </p>

<ol>
  <li>Computer checks to see if it can attack</li>
  <li>If it cannot attack it will see if it needs to defend </li>
  <li>If it doesn’t need to defend it will just choose a random available square.</li>
</ol>

<h3>Computer attacks</h3>

<div class="highlight"><pre><code class="ruby"><span class="lineno">1</span> <span class="c1"># attack </span>
<span class="lineno">2</span> <span class="no">WINNING_LINES</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">l</span><span class="o">|</span>
<span class="lineno">3</span>   <span class="n">defend_this_square</span> <span class="o">=</span> <span class="n">two_in_a_row</span><span class="p">({</span><span class="n">l</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">=&gt;</span> <span class="n">squares</span><span class="o">[</span><span class="n">l</span><span class="o">[</span><span class="mi">0</span><span class="o">]]</span><span class="p">,</span> <span class="n">l</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">=&gt;</span> <span class="n">squares</span><span class="o">[</span><span class="n">l</span><span class="o">[</span><span class="mi">1</span><span class="o">]]</span><span class="p">,</span> <span class="n">l</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span> <span class="o">=&gt;</span> <span class="n">squares</span><span class="o">[</span><span class="n">l</span><span class="o">[</span><span class="mi">2</span><span class="o">]]</span><span class="p">},</span> <span class="n">O</span><span class="p">)</span>
<span class="lineno">4</span>   <span class="k">if</span> <span class="n">defend_this_square</span>
<span class="lineno">5</span>     <span class="n">squares</span><span class="o">[</span><span class="n">defend_this_square</span><span class="o">]</span> <span class="o">=</span> <span class="n">O</span>
<span class="lineno">6</span>     <span class="n">attacked</span> <span class="o">=</span> <span class="kp">true</span>
<span class="lineno">7</span>     <span class="k">break</span>
<span class="lineno">8</span>   <span class="k">end</span>
<span class="lineno">9</span> <span class="k">end</span></code></pre></div>

<p>The first part starting on line 2 and ending on line 9 is selecting each array (l) in the WINNING_LINES array. </p>

<p>Line 3 - For each of the arrays in the WINNING_LINES array we are reassigning defend_this_square with the result of the two_in_a_row method call that runs the check we described above that will either return a integer (which will also evaluate to true) or false. </p>

<p>Line 4 gets executed if defend_this_square is true (contains a number). If defend_this_square is true on an iteration of WINNING_LINES.each, two_in_a_row must have identified an instance where there were two ‘o’ and an empty square and it will have returned the empty square number into our defend_this_square variable. </p>

<p>Line 5 then gets executed which assigns board_squares[defend_this_square] with a ‘o’ therefor completing a line. </p>

<p>Next we reassign the attacked varaible as true so that option 2 and 3 do not get executed and finally on line 7 we break out of the loop.</p>

<h3>Computer defends</h3>

<p>If defend_this_square had not have evaluated to true on any of the iterations then the defence check would execute:</p>

<div class="highlight"><pre><code class="ruby"><span class="lineno"> 1</span> <span class="c1"># defend  </span>
<span class="lineno"> 2</span> <span class="k">if</span> <span class="n">attacked</span> <span class="o">==</span> <span class="kp">false</span>
<span class="lineno"> 3</span>   <span class="no">WINNING_LINES</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">l</span><span class="o">|</span>
<span class="lineno"> 4</span>     <span class="n">defend_this_square</span> <span class="o">=</span> <span class="n">two_in_a_row</span><span class="p">({</span><span class="n">l</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">=&gt;</span> <span class="n">squares</span><span class="o">[</span><span class="n">l</span><span class="o">[</span><span class="mi">0</span><span class="o">]]</span><span class="p">,</span> <span class="n">l</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">=&gt;</span> <span class="n">squares</span><span class="o">[</span><span class="n">l</span><span class="o">[</span><span class="mi">1</span><span class="o">]]</span><span class="p">,</span> <span class="n">l</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span> <span class="o">=&gt;</span> <span class="n">squares</span><span class="o">[</span><span class="n">l</span><span class="o">[</span><span class="mi">2</span><span class="o">]]</span><span class="p">},</span> <span class="n">X</span><span class="p">)</span>
<span class="lineno"> 5</span>     <span class="k">if</span> <span class="n">defend_this_square</span>
<span class="lineno"> 6</span>       <span class="n">squares</span><span class="o">[</span><span class="n">defend_this_square</span><span class="o">]</span> <span class="o">=</span> <span class="n">O</span>
<span class="lineno"> 7</span>       <span class="k">break</span>
<span class="lineno"> 8</span>     <span class="k">end</span> 
<span class="lineno"> 9</span>   <span class="k">end</span> 
<span class="lineno">10</span> <span class="k">end</span></code></pre></div>

<p>So here we can see that if the computer had attacked the attacked variable would now equal true and therefor the above would not be carried out. Assuming that the computer didn’t attack we once again iterate through each of the WINNING_LINES arrays and check for a two_in_a_row instance for X. If it finds an instance it assigns the empty square to defend_this_square and then assigns board_squares[defend_this_square] with an ‘o’ to stop the player from completing a line on their next go. After this it breaks out of the loop.</p>

<p>Finally if neither of these are carried out the computer chooses a random availble square:</p>

<div class="highlight"><pre><code class="ruby"><span class="n">squares</span><span class="o">[</span><span class="n">available_squares</span><span class="p">(</span><span class="n">squares</span><span class="p">)</span><span class="o">.</span><span class="n">sample</span><span class="o">]</span> <span class="o">=</span> <span class="n">O</span> <span class="k">unless</span> <span class="n">defend_this_square</span></code></pre></div>

<p>Unless defend_this_square evaluated to true squares[available_squares(squares).sample] = O.</p>

<p>So there we have the newly updated player2 method and we have a pretty good understanding of what two_in_a_row and check_for_winner does so now let us understand how they work.</p>

<h3>two_in_a_row</h3>

<div class="highlight"><pre><code class="ruby"><span class="lineno">1</span> <span class="c1"># checks to see if two in a row</span>
<span class="lineno">2</span> <span class="k">def</span> <span class="nf">two_in_a_row</span><span class="p">(</span><span class="n">hsh</span><span class="p">,</span> <span class="n">mrkr</span><span class="p">)</span>
<span class="lineno">3</span>   <span class="k">if</span> <span class="n">hsh</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">mrkr</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
<span class="lineno">4</span>     <span class="n">hsh</span><span class="o">.</span><span class="n">select</span><span class="p">{</span><span class="o">|</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="o">|</span> <span class="n">v</span> <span class="o">==</span> <span class="s1">&#39; &#39;</span><span class="p">}</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">first</span>
<span class="lineno">5</span>   <span class="k">else</span>
<span class="lineno">6</span>     <span class="kp">false</span>
<span class="lineno">7</span>   <span class="k">end</span>
<span class="lineno">8</span> <span class="k">end</span></code></pre></div>

<p>For this method to work we want to pass in two parameters, a hash and a marker. The marker is either the X or O constant variable declared at the top of our program. The hash is a little more complex.</p>

<p>This hash is created in the player2 method like so:</p>

<div class="highlight"><pre><code class="ruby"><span class="no">WINNING_LINES</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">l</span><span class="o">|</span>
  <span class="n">defend_this_square</span> <span class="o">=</span> <span class="n">two_in_a_row</span><span class="p">({</span><span class="n">l</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">=&gt;</span> <span class="n">squares</span><span class="o">[</span><span class="n">l</span><span class="o">[</span><span class="mi">0</span><span class="o">]]</span><span class="p">,</span> <span class="n">l</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">=&gt;</span> <span class="n">squares</span><span class="o">[</span><span class="n">l</span><span class="o">[</span><span class="mi">1</span><span class="o">]]</span><span class="p">,</span> <span class="n">l</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span> <span class="o">=&gt;</span> <span class="n">squares</span><span class="o">[</span><span class="n">l</span><span class="o">[</span><span class="mi">2</span><span class="o">]]</span><span class="p">},</span> <span class="n">O</span><span class="p">)</span>
<span class="k">end</span></code></pre></div>

<p>So lets say we are on the iteration of WINNING_LINES.each where l is [4,5,6] and square numbers 4 &amp; 6 contained ‘o’ and 5 was empty:</p>

<div class="highlight"><pre><code class="ruby"><span class="p">{</span><span class="n">l</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">=&gt;</span> <span class="n">squares</span><span class="o">[</span><span class="n">l</span><span class="o">[</span><span class="mi">0</span><span class="o">]]</span><span class="p">,</span> <span class="n">l</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">=&gt;</span> <span class="n">squares</span><span class="o">[</span><span class="n">l</span><span class="o">[</span><span class="mi">1</span><span class="o">]]</span><span class="p">,</span> <span class="n">l</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span> <span class="o">=&gt;</span> <span class="n">squares</span><span class="o">[</span><span class="n">l</span><span class="o">[</span><span class="mi">2</span><span class="o">]]</span><span class="p">}</span></code></pre></div>

<p>would be</p>

<div class="highlight"><pre><code class="ruby"><span class="p">{</span> <span class="mi">4</span> <span class="o">=&gt;</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="mi">5</span> <span class="o">=&gt;</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="mi">6</span> <span class="o">=&gt;</span> <span class="s1">&#39;o&#39;</span><span class="p">}</span></code></pre></div>

<p>The above is the hash which is passed into two_in_a_row. Next we ask if the values of X appears twice in the hash and if it does we select and return the first key that equals ‘ ‘ in our example it would return the integer 5. If the condition is not met the method returns false.</p>

<h3>check_for_winner</h3>

<div class="highlight"><pre><code class="ruby"><span class="lineno"> 1</span> <span class="c1"># check for winner method</span>
<span class="lineno"> 2</span> <span class="k">def</span> <span class="nf">check_for_winner</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">squares</span><span class="p">)</span>
<span class="lineno"> 3</span>   <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">find</span> <span class="p">{</span><span class="o">|</span><span class="n">l</span><span class="o">|</span> <span class="n">l</span><span class="o">.</span><span class="n">all?</span> <span class="p">{</span><span class="o">|</span><span class="n">k</span><span class="o">|</span> <span class="n">squares</span><span class="o">[</span><span class="n">k</span><span class="o">]</span> <span class="o">==</span> <span class="n">X</span><span class="p">}</span> <span class="p">}</span>
<span class="lineno"> 4</span>     <span class="nb">puts</span> <span class="s2">&quot;player WINS!!!&quot;</span>
<span class="lineno"> 5</span>     <span class="kp">true</span>
<span class="lineno"> 6</span>   <span class="k">elsif</span> <span class="n">line</span><span class="o">.</span><span class="n">find</span> <span class="p">{</span><span class="o">|</span><span class="n">l</span><span class="o">|</span> <span class="n">l</span><span class="o">.</span><span class="n">all?</span> <span class="p">{</span><span class="o">|</span><span class="n">k</span><span class="o">|</span> <span class="n">squares</span><span class="o">[</span><span class="n">k</span><span class="o">]</span> <span class="o">==</span> <span class="n">O</span><span class="p">}</span> <span class="p">}</span>
<span class="lineno"> 7</span>     <span class="nb">puts</span> <span class="s2">&quot;computer wins :(&quot;</span>
<span class="lineno"> 8</span>     <span class="kp">true</span>
<span class="lineno"> 9</span>   <span class="k">end</span>
<span class="lineno">10</span> <span class="k">end</span></code></pre></div>

<p>In order for us to check if a player has 3 in a row we need to pass in the arrays in WINNING_LINES and the board_squares. Lines 3 to 5 and lines 6 to 8 essentially do the same thing in as much as one tests to see if player has won and the second tests to see if the computer has won and outputs a message if either is true.</p>

<p>So lets look at the first in detail.</p>

<div class="highlight"><pre><code class="ruby"><span class="n">line</span><span class="o">.</span><span class="n">find</span> <span class="p">{</span><span class="o">|</span><span class="n">l</span><span class="o">|</span> <span class="n">l</span><span class="o">.</span><span class="n">all?</span> <span class="p">{</span><span class="o">|</span><span class="n">k</span><span class="o">|</span> <span class="n">squares</span><span class="o">[</span><span class="n">k</span><span class="o">]</span> <span class="o">==</span> <span class="n">X</span><span class="p">}</span> <span class="p">}</span></code></pre></div>

<p>line is going to be our WINNING_LINES array and I am using the .find method to iterate through each array (l), and if all the elements in that array equal ‘x’ then it is true and the block is executed:</p>

<div class="highlight"><pre><code class="ruby"><span class="nb">puts</span> <span class="s2">&quot;player WINS!!!&quot;</span>
<span class="kp">true</span></code></pre></div>

<h3>The game loop</h3>

<p>Now we have all of the methods and constants our game requires to function lets call them in to our game loop. </p>

<div class="highlight"><pre><code class="ruby"><span class="lineno"> 1</span> <span class="c1"># play again?</span>
<span class="lineno"> 2</span> <span class="n">play_again</span> <span class="o">=</span> <span class="s1">&#39;y&#39;</span>
<span class="lineno"> 3</span> 
<span class="lineno"> 4</span> <span class="k">while</span> <span class="n">play_again</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span>
<span class="lineno"> 5</span> 
<span class="lineno"> 6</span>   <span class="c1"># initialize the empty hash that will store the board squares</span>
<span class="lineno"> 7</span>   <span class="n">board_squares</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span> <span class="o">=&gt;</span> <span class="s2">&quot; &quot;</span><span class="p">,</span><span class="mi">2</span> <span class="o">=&gt;</span> <span class="s2">&quot; &quot;</span><span class="p">,</span><span class="mi">3</span> <span class="o">=&gt;</span> <span class="s2">&quot; &quot;</span><span class="p">,</span><span class="mi">4</span> <span class="o">=&gt;</span> <span class="s2">&quot; &quot;</span><span class="p">,</span><span class="mi">5</span> <span class="o">=&gt;</span> <span class="s2">&quot; &quot;</span><span class="p">,</span><span class="mi">6</span> <span class="o">=&gt;</span> <span class="s2">&quot; &quot;</span><span class="p">,</span><span class="mi">7</span> <span class="o">=&gt;</span> <span class="s2">&quot; &quot;</span><span class="p">,</span><span class="mi">8</span> <span class="o">=&gt;</span> <span class="s2">&quot; &quot;</span><span class="p">,</span><span class="mi">9</span> <span class="o">=&gt;</span> <span class="s2">&quot; &quot;</span><span class="p">}</span>
<span class="lineno"> 8</span> 
<span class="lineno"> 9</span>   <span class="c1"># players stored in array so player can be chosen at random</span>
<span class="lineno">10</span>   <span class="n">players</span> <span class="o">=</span> <span class="o">[</span><span class="s2">&quot;player1&quot;</span><span class="p">,</span> <span class="s2">&quot;player2&quot;</span><span class="o">]</span>
<span class="lineno">11</span> 
<span class="lineno">12</span>   <span class="c1"># setting the who goes first variable</span>
<span class="lineno">13</span>   <span class="n">goes_first</span> <span class="o">=</span> <span class="n">players</span><span class="o">.</span><span class="n">sample</span>
<span class="lineno">14</span> 
<span class="lineno">15</span>   <span class="c1"># show players the empty board</span>
<span class="lineno">16</span>   <span class="n">draw_board</span><span class="p">(</span><span class="n">board_squares</span><span class="p">)</span>
<span class="lineno">17</span> 
<span class="lineno">18</span>   <span class="c1"># Conditional that checks which loop to execute: player 1 or player 2</span>
<span class="lineno">19</span>   <span class="k">if</span> <span class="n">goes_first</span> <span class="o">==</span> <span class="s1">&#39;player1&#39;</span>
<span class="lineno">20</span>     <span class="k">begin</span>
<span class="lineno">21</span>       <span class="k">break</span> <span class="k">if</span> <span class="n">check_for_winner</span><span class="p">(</span><span class="no">WINNING_LINES</span><span class="p">,</span> <span class="n">board_squares</span><span class="p">)</span> <span class="o">==</span> <span class="kp">true</span>
<span class="lineno">22</span>       <span class="n">player1</span><span class="p">(</span><span class="n">board_squares</span><span class="p">)</span>
<span class="lineno">23</span>       <span class="k">break</span> <span class="k">if</span> <span class="n">check_for_winner</span><span class="p">(</span><span class="no">WINNING_LINES</span><span class="p">,</span> <span class="n">board_squares</span><span class="p">)</span> <span class="o">==</span> <span class="kp">true</span>
<span class="lineno">24</span>       <span class="n">player2</span><span class="p">(</span><span class="no">WINNING_LINES</span><span class="p">,</span> <span class="n">board_squares</span><span class="p">)</span>
<span class="lineno">25</span>     <span class="k">end</span> <span class="k">until</span> <span class="n">available_squares</span><span class="p">(</span><span class="n">board_squares</span><span class="p">)</span><span class="o">.</span><span class="n">empty?</span>
<span class="lineno">26</span>   <span class="k">elsif</span> <span class="n">goes_first</span> <span class="o">==</span> <span class="s1">&#39;player2&#39;</span>
<span class="lineno">27</span>     <span class="k">begin</span>
<span class="lineno">28</span>       <span class="k">break</span> <span class="k">if</span> <span class="n">check_for_winner</span><span class="p">(</span><span class="no">WINNING_LINES</span><span class="p">,</span> <span class="n">board_squares</span><span class="p">)</span> <span class="o">==</span> <span class="kp">true</span>
<span class="lineno">29</span>       <span class="n">player2</span><span class="p">(</span><span class="no">WINNING_LINES</span><span class="p">,</span> <span class="n">board_squares</span><span class="p">)</span>
<span class="lineno">30</span>       <span class="k">break</span> <span class="k">if</span> <span class="n">check_for_winner</span><span class="p">(</span><span class="no">WINNING_LINES</span><span class="p">,</span> <span class="n">board_squares</span><span class="p">)</span> <span class="o">==</span> <span class="kp">true</span>
<span class="lineno">31</span>       <span class="n">player1</span><span class="p">(</span><span class="n">board_squares</span><span class="p">)</span>
<span class="lineno">32</span>     <span class="k">end</span> <span class="k">until</span> <span class="n">available_squares</span><span class="p">(</span><span class="n">board_squares</span><span class="p">)</span><span class="o">.</span><span class="n">empty?</span>
<span class="lineno">33</span>   <span class="k">end</span>
<span class="lineno">34</span> 
<span class="lineno">35</span>   <span class="nb">sleep</span> <span class="mi">0</span><span class="o">.</span><span class="mi">5</span>
<span class="lineno">36</span>   <span class="nb">puts</span> <span class="s2">&quot;GAME OVER&quot;</span>
<span class="lineno">37</span> 
<span class="lineno">38</span>   <span class="c1"># play again?</span>
<span class="lineno">39</span>   <span class="nb">sleep</span> <span class="mi">0</span><span class="o">.</span><span class="mi">5</span>
<span class="lineno">40</span>   <span class="nb">puts</span> <span class="s2">&quot;Play again? (y/n)&quot;</span>
<span class="lineno">41</span>   <span class="n">play_again</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span>
<span class="lineno">42</span> <span class="k">end</span></code></pre></div>

<p>We covered up to line 19 in part 1. Assuming that player1 goes first (it’s the same for player2) we then go to line 20 where our begin end until starts. First off on line 21 we check to see if check_for_winner is true and if it is we break out and end game. If it is not true the player1 method is invoked and after that we check to see if check_for_winner is true again. We break if it is and we move on to player2 method if it is not. We continue this loop until check_for_winner is true or no are no available squares left.</p>

<h2>Tidying up and tweaks</h2>
<p>The ever helpfull guys over on the #ruby channel at irc made the following observations that I’ve duly corrected.</p>

<ul>
  <li>Don’t reassign constants in a loop, they should be constant values so put them at top of the script</li>
  <li>else; false; end is equiv to else; return false; end as its the last expression of a method so no need for the return</li>
  <li>General indentation that I’d missed</li>
  <li>I orignally named my two_in_a_row method two_in_a_row?. You should only use a ‘?’ if your method is going to return a boolean and because it often returns a value the question mark should be omitted</li>
</ul>

<h3>Thanks:</h3>
<p>Chris, Albert and Brandon at Tealeaf for reading and running my code and making suggestions for improvement and thanks Chris for writing the neat little two_in_a_row method and help me understand what was going on there. Hanmac, tobiasvl, jhass, shevy &amp; workmad3 and the #ruby irc channel in general for always being on hand to help out without ever seeming to want anything in return.</p>

